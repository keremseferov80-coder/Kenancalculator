<!DOCTYPE html>
<html lang="az">
<head>

<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>KenanCalc - Elmi Kalkulyator</title>


<meta name="description" content="G√ºcl√º elmi kalkulyator Az…ôrbaycan dilind…ô - Desktop v…ô Mobil App" />
<meta name="theme-color" content="#4a90e2" />
<meta name="mobile-web-app-capable" content="yes" />
<meta name="apple-mobile-web-app-capable" content="yes" />
<meta name="apple-mobile-web-app-status-bar-style" content="default" />
<meta name="apple-mobile-web-app-title" content="KenanCalc" />
<meta name="msapplication-TileColor" content="#4a90e2" />
<meta name="msapplication-tap-highlight" content="no" />

<!-- PWA Manifest -->
<link rel="manifest" href="manifest.json" />

<!-- Icons -->
<link rel="icon" type="image/png" sizes="32x32" href="assets/icon-32x32.png" />
<link rel="icon" type="image/png" sizes="16x16" href="assets/icon-16x16.png" />
<link rel="apple-touch-icon" sizes="180x180" href="assets/icon-180x180.png" />
<link rel="apple-touch-icon" sizes="152x152" href="assets/icon-152x152.png" />
<link rel="apple-touch-icon" sizes="144x144" href="assets/icon-144x144.png" />
<link rel="apple-touch-icon" sizes="120x120" href="assets/icon-120x120.png" />
<link rel="apple-touch-icon" sizes="114x114" href="assets/icon-114x114.png" />
<link rel="apple-touch-icon" sizes="76x76" href="assets/icon-76x76.png" />
<link rel="apple-touch-icon" sizes="72x72" href="assets/icon-72x72.png" />
<link rel="apple-touch-icon" sizes="60x60" href="assets/icon-60x60.png" />
<link rel="apple-touch-icon" sizes="57x57" href="assets/icon-57x57.png" />

<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet" />

<!-- Google AdMob -->
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-XXXXXXXXXX" crossorigin="anonymous"></script>

<style>
  * { box-sizing: border-box; }

  body {
    margin: 0; font-family: 'Poppins', Arial, sans-serif;
    background: var(--bg-color); color: var(--text-color);
    display: flex; justify-content: center; align-items: center;
    min-height: 100vh; transition: all 0.5s ease;
    flex-direction: column; overflow-x: hidden;
  }

  :root {
    --bg-color-light: #eef2f7; --bg-color-dark: #121212;
    --text-color-light: #222; --text-color-dark: #eee;
    --main-color: #4a90e2; --main-rgb: 74,144,226;
    --btn-bg-light: rgba(var(--main-rgb), 0.85);
    --btn-bg-dark: rgba(var(--main-rgb), 0.4);
    --btn-hover-light: #357ab8; --btn-hover-dark: #5599ee;
    --elmi-btn-bg-light: rgba(123,67,151,0.85);
    --elmi-btn-bg-dark: rgba(123,67,151,0.4);
    --elmi-btn-hover-light: #5e3271; --elmi-btn-hover-dark: #8855aa;
    --error-color: #e74c3c; --success-color: #27ae60;
  }

  body.light {
    --bg-color: var(--bg-color-light); --text-color: var(--text-color-light);
    --btn-bg: var(--btn-bg-light); --btn-hover: var(--btn-hover-light);
    --elmi-btn-bg: var(--elmi-btn-bg-light); --elmi-btn-hover: var(--elmi-btn-hover-light);
  }
  body.dark {
    --bg-color: var(--bg-color-dark); --text-color: var(--text-color-dark);
    --btn-bg: var(--btn-bg-dark); --btn-hover: var(--btn-hover-dark);
    --elmi-btn-bg: var(--elmi-btn-bg-dark); --elmi-btn-hover: var(--elmi-btn-hover-dark);
  }

  @keyframes fadeInScale {
    from { opacity: 0; transform: scale(0.85); }
    to { opacity: 1; transform: scale(1); }
  }
  @keyframes shake {
    0%, 100% { transform: translateX(0); }
    20%, 60% { transform: translateX(-6px); }
    40%, 80% { transform: translateX(6px); }
  }

  .main-wrapper {
    display: flex; gap: 20px; width: 95vw; max-width: 1200px;
    flex-wrap: wrap; justify-content: center;
  }

  .container {
    background: var(--bg-color); width: 450px; max-width: 100%;
    padding: 25px 30px 40px; border-radius: 20px;
    box-shadow: 0 6px 15px rgba(0,0,0,0.12), 0 8px 30px rgba(0,0,0,0.06);
    position: relative; animation: fadeInScale 0.7s ease forwards;
  }

  h1 {
    margin: 0 0 15px; font-weight: 600; font-size: 1.8rem;
    color: var(--text-color); user-select: none; text-align: center;
    letter-spacing: 1px; text-shadow: 0 0 6px rgba(var(--main-rgb), 0.55);
  }

  #display {
    width: 100%; height: 80px; background: #f9f9f9; border-radius: 15px;
    font-size: 1.8rem; text-align: right; padding: 15px 20px;
    box-shadow: inset 0 0 14px #aaa; overflow-wrap: break-word;
    user-select: none; margin-bottom: 20px; color: #222;
    transition: color 0.3s ease; font-family: 'Courier New', monospace;
  }
  #display.error { color: var(--error-color); font-weight: 700; animation: shake 0.4s ease; }
  #display.success { color: var(--success-color); font-weight: 600; }

  .buttons { display: grid; grid-template-columns: repeat(4, 1fr); gap: 12px; margin-bottom: 15px; }
  .elmi-buttons { display: grid; grid-template-columns: repeat(5, 1fr); gap: 10px; margin-bottom: 15px; }
  .advanced-buttons { display: grid; grid-template-columns: repeat(4, 1fr); gap: 10px; margin-bottom: 15px; }

  button {
    padding: 15px 8px; font-size: 1.1rem; font-weight: 600; border: none;
    border-radius: 12px; cursor: pointer; color: white;
    box-shadow: 0 4px 20px rgba(0,0,0,0.2);
    transition: background-color 0.3s ease, transform 0.15s ease, box-shadow 0.3s ease;
    user-select: none; position: relative; overflow: hidden; min-height: 55px;
    touch-action: manipulation; /* Mobil √º√ß√ºn touch optimizasiyasƒ± */
  }
  button:hover { transform: translateY(-2px); box-shadow: 0 6px 25px rgba(0,0,0,0.3); }
  button:active { transform: scale(0.95); }

  .buttons button { background-color: var(--btn-bg); }
  .buttons button:hover { background-color: var(--btn-hover); box-shadow: 0 6px 20px var(--btn-hover); }

  .elmi-buttons button, .advanced-buttons button {
    background-color: var(--elmi-btn-bg); font-size: 0.95rem; padding: 12px 6px;
  }
  .elmi-buttons button:hover, .advanced-buttons button:hover {
    background-color: var(--elmi-btn-hover); box-shadow: 0 6px 20px var(--elmi-btn-hover);
  }

  .controls {
    display: flex; justify-content: space-between; margin-bottom: 15px;
    user-select: none; flex-wrap: wrap; gap: 10px;
  }
  select, .theme-toggle {
    font-size: 1rem; padding: 6px 12px; border-radius: 10px;
    border: 1.8px solid #ccc; cursor: pointer; background-color: white;
    color: #444; transition: background-color 0.3s ease; min-width: 120px;
  }
  select:hover, .theme-toggle:hover { background-color: #ddd; }
  .theme-toggle {
    user-select: none; border: none; background-color: var(--btn-bg);
    color: white; font-weight: 600; border-radius: 15px; padding: 8px 20px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.15);
  }
  .theme-toggle:active { transform: scale(0.95); box-shadow: 0 2px 8px rgba(0,0,0,0.2); }

  #history, #constants {
    width: 280px; max-height: 500px; background: var(--bg-color);
    border-radius: 20px; box-shadow: 0 0 15px rgba(var(--main-rgb),0.25), 0 5px 10px rgba(0,0,0,0.07);
    padding: 20px; overflow-y: auto; font-size: 1rem; user-select: none;
    display: flex; flex-direction: column;
  }
  #history h2, #constants h2 {
    margin-top: 0; color: var(--text-color); text-align: center;
    margin-bottom: 15px; text-shadow: 0 0 5px rgba(var(--main-rgb),0.4);
  }
  #history ul { list-style: none; padding: 0; margin: 0; flex-grow: 1; overflow-y: auto; }
  #history li {
    margin-bottom: 10px; border-bottom: 1px solid #aaa2; padding-bottom: 6px;
    color: var(--text-color); cursor: pointer; user-select: none;
    transition: background-color 0.3s ease; font-family: 'Courier New', monospace; font-size: 0.9rem;
  }
  #history li:hover {
    background-color: rgba(var(--main-rgb),0.15); border-radius: 8px; padding: 4px 8px;
  }
  #clearHistoryBtn {
    margin-top: 10px; background-color: var(--error-color);
    box-shadow: 0 4px 12px rgba(231,76,60,0.4); font-weight: 600;
    color: white; border-radius: 12px; padding: 10px 0; cursor: pointer;
    transition: background-color 0.3s ease, box-shadow 0.3s ease;
    user-select: none; border: none;
  }
  #clearHistoryBtn:hover {
    background-color: #c0392b; box-shadow: 0 6px 18px rgba(192,57,43,0.5);
  }
  #clearHistoryBtn:active {
    transform: scale(0.95); box-shadow: 0 2px 8px rgba(192,57,43,0.6);
  }

  .constant-item {
    display: flex; justify-content: space-between; align-items: center;
    padding: 8px 12px; margin-bottom: 8px; background: rgba(var(--main-rgb), 0.1);
    border-radius: 8px; cursor: pointer; transition: background-color 0.3s ease;
  }
  .constant-item:hover { background: rgba(var(--main-rgb), 0.2); }
  .constant-name { font-weight: 600; color: var(--text-color); }
  .constant-value { font-family: 'Courier New', monospace; color: var(--text-color); opacity: 0.8; }

  /* Portrait orientasiya √º√ß√ºn x√ºsusi still…ôr */
  @media (orientation: portrait) and (max-width: 600px) {
    .main-wrapper { flex-direction: column; gap: 15px; }
    .container { width: 95vw; padding: 20px; }
    button { min-height: 60px; font-size: 1.3rem; padding: 20px 8px; }
    .elmi-buttons button, .advanced-buttons button { 
      font-size: 1.1rem; padding: 18px 6px; min-height: 55px; 
    }
    #display { height: 90px; font-size: 2rem; }
    .buttons { gap: 15px; }
    .elmi-buttons, .advanced-buttons { gap: 12px; }
  }

  /* Landscape orientasiya √º√ß√ºn x√ºsusi still…ôr */
  @media (orientation: landscape) and (max-height: 600px) {
    .main-wrapper { flex-direction: row; gap: 15px; }
    .container { width: 60vw; padding: 15px; }
    #history, #constants { width: 20vw; max-height: 80vh; }
    button { min-height: 45px; font-size: 1rem; padding: 12px 6px; }
    .elmi-buttons button, .advanced-buttons button { 
      font-size: 0.9rem; padding: 10px 4px; min-height: 40px; 
    }
    #display { height: 70px; font-size: 1.6rem; }
  }

  @media (max-width: 900px) {
    .main-wrapper { flex-direction: column; align-items: center; }
    #history, #constants { width: 90vw; max-height: 250px; margin-top: 15px; border-radius: 15px; }
    .container { width: 90vw; max-width: none; }
    button { padding: 18px 0; font-size: 1.2rem; min-height: 55px; }
    .elmi-buttons button, .advanced-buttons button { font-size: 1rem; padding: 15px 4px; }
    .controls { gap: 8px; justify-content: center; }
  }

  /* √áox ki√ßik ekranlar √º√ß√ºn */
  @media (max-width: 480px) {
    .container { width: 98vw; padding: 15px; }
    button { min-height: 65px; font-size: 1.4rem; }
    .elmi-buttons button, .advanced-buttons button { 
      font-size: 1.2rem; min-height: 60px; 
    }
    #display { height: 100px; font-size: 2.2rem; }
    h1 { font-size: 1.6rem; }
  }
</style>
</head>
<body class="light">

<div class="main-wrapper">
  <div class="container">
    <h1>KenanCalc - Elmi Kalkulyator</h1>
    <div class="controls">
      <select id="language" title="Dil se√ßimi">
        <option value="az" selected>Az…ôrbaycan</option>
        <option value="en">English</option>
        <option value="tr">T√ºrk√ße</option>
        <option value="ru">–†—É—Å—Å–∫–∏–π</option>
      </select>

      <select id="colorPicker" title="D√ºym…ôl…ôrin r…ôngini se√ßin">
        <option value="#4a90e2" selected>Mavi</option>
        <option value="#e74c3c">Qƒ±rmƒ±zƒ±</option>
        <option value="#27ae60">Ya≈üƒ±l</option>
        <option value="#f39c12">Narƒ±ncƒ±</option>
        <option value="#8e44ad">B…ôn√∂v≈ü…ôyi</option>
        <option value="#34495e">T√ºnd Gri</option>
      </select>

      <button class="theme-toggle" id="themeToggle">Qaranlƒ±q M√∂vzu</button>
      
      <!-- M√ºkafatlƒ± Reklam D√ºym…ôsi -->
      <button class="reward-ad-btn" id="rewardAdBtn" title="Reklam izl…ôyib premium funksiyalar …ôld…ô et">
        üéÅ Premium Al
      </button>
    </div>
    
    <!-- Premium Status -->
    <div class="premium-status" id="premiumStatus" style="display: none;">
      ‚≠ê Premium Aktiv - <span id="premiumTimer"></span>
    </div>

    <div id="display">0</div>

    <!-- ∆èsas d√ºym…ôl…ôr -->
    <div class="buttons">
      <button onclick="handleClick('7')">7</button>
      <button onclick="handleClick('8')">8</button>
      <button onclick="handleClick('9')">9</button>
      <button onclick="handleClick('/')" title="B√∂lm…ô">√∑</button>

      <button onclick="handleClick('4')">4</button>
      <button onclick="handleClick('5')">5</button>
      <button onclick="handleClick('6')">6</button>
      <button onclick="handleClick('*')" title="Vurma">√ó</button>

      <button onclick="handleClick('1')">1</button>
      <button onclick="handleClick('2')">2</button>
      <button onclick="handleClick('3')">3</button>
      <button onclick="handleClick('-')" title="√áƒ±xma">‚àí</button>

      <button onclick="handleClick('0')">0</button>
      <button onclick="handleClick('.')">.</button>
      <button onclick="calculate()" title="Hesabla">=</button>
      <button onclick="handleClick('+')" title="Toplama">+</button>

      <button onclick="clearDisplay()" title="T…ômizl…ô">C</button>
      <button onclick="backspace()" title="Sil">‚å´</button>
      <button onclick="handleClick('(')">(</button>
      <button onclick="handleClick(')')">) </button>
    </div>

    <!-- Trigonometrik funksiyalar -->
    <div class="elmi-buttons">
      <button onclick="handleClick('Math.sin(')" title="Sinus">sin</button>
      <button onclick="handleClick('Math.cos(')" title="Kosinus">cos</button>
      <button onclick="handleClick('Math.tan(')" title="Tanjant">tan</button>
      <button onclick="handleClick('Math.asin(')" title="T…ôrs sinus">asin</button>
      <button onclick="handleClick('Math.acos(')" title="T…ôrs kosinus">acos</button>

      <button onclick="handleClick('Math.atan(')" title="T…ôrs tanjant">atan</button>
      <button onclick="handleClick('Math.sinh(')" title="Hiperbolik sinus">sinh</button>
      <button onclick="handleClick('Math.cosh(')" title="Hiperbolik kosinus">cosh</button>
      <button onclick="handleClick('Math.tanh(')" title="Hiperbolik tanjant">tanh</button>
      <button onclick="handleClick('Math.asinh(')" title="T…ôrs hiperbolik sinus">asinh</button>
    </div>

    <!-- Logaritm v…ô eksponensial funksiyalar -->
    <div class="advanced-buttons">
      <!-- Premium funksiyalar adi d√ºym…ôl…ôrd…ôn silindi -->
      <button onclick="handleClick('Math.pow(10,')" title="10 √ºst√º x">10À£</button>

      <button onclick="handleClick('Math.sqrt(')" title="K√∂k altƒ±">‚àö</button>
      <button onclick="handleClick('Math.cbrt(')" title="Kub k√∂k√º">‚àõ</button>
      <button onclick="handleClick('Math.pow(')" title="x √ºst√º y">x ∏</button>
      <button onclick="handleClick('Math.abs(')" title="M√ºtl…ôq qiym…ôt">|x|</button>

      <button onclick="factorial()" title="Faktorial">n!</button>
      <button onclick="handleClick('Math.floor(')" title="A≈üaƒüƒ± yuvarlaqla≈üdƒ±r">‚åäx‚åã</button>
      <button onclick="handleClick('Math.ceil(')" title="Yuxarƒ± yuvarlaqla≈üdƒ±r">‚åàx‚åâ</button>
      <button onclick="handleClick('Math.round(')" title="Yuvarlaqla≈üdƒ±r">round</button>

      <button onclick="handleClick('Math.PI')" title="Pi sabiti">œÄ</button>
      <button onclick="randomNumber()" title="T…ôsad√ºfi r…ôq…ôm">Rnd</button>
      <button onclick="degToRad()" title="D…ôr…ôc…ôd…ôn radiana">D¬∞‚ÜíR</button>
      
      <!-- Vahid √áevirm…ôl…ôri -->
      <button onclick="showUnitConverter()" title="Vahid √ßevirm…ôl…ôri">üìè</button>
      <button onclick="showMathGame()" title="Riyaziyyat oyunu">üéÆ</button>
      <button onclick="showAchievements()" title="M√ºkafatlar">üèÜ</button>
      
      <!-- Premium Funksiyalar -->
      <button onclick="usePremiumFunction('log10')" class="premium-btn" title="Onluq loqarifm (Premium)">log‚ÇÅ‚ÇÄ</button>
      <button onclick="usePremiumFunction('ln')" class="premium-btn" title="T…ôbii loqarifm (Premium)">ln</button>
      <button onclick="usePremiumFunction('exp')" class="premium-btn" title="Eksponensial (Premium)">eÀ£</button>
    </div>
  </div>

  <!-- Tarix√ß…ô paneli -->
  <div id="history">
    <h2>Tarix√ß…ô</h2>
    <ul id="historyList"></ul>
    <button id="clearHistoryBtn">T…ômizl…ô</button>
  </div>

  <!-- Sabitl…ôr paneli -->
  <div id="constants">
    <h2>Fiziki Sabitl…ôr</h2>
    <div id="constantsList"></div>
  </div>
</div>

<script>
  const display = document.getElementById('display');
  const languageSelect = document.getElementById('language');
  const colorPicker = document.getElementById('colorPicker');
  const themeToggleBtn = document.getElementById('themeToggle');
  const historyList = document.getElementById('historyList');
  const clearHistoryBtn = document.getElementById('clearHistoryBtn');
  const constantsList = document.getElementById('constantsList');

  let history = [];

  // √áoxdilli m…ôtnl…ôr
  const texts = {
    az: {
      title: 'KenanCalc - Elmi Kalkulyator',
      history: 'Tarix√ß…ô',
      constants: 'Fiziki Sabitl…ôr',
      clear: 'T…ômizl…ô',
      themeLight: 'ƒ∞≈üƒ±qlƒ± M√∂vzu',
      themeDark: 'Qaranlƒ±q M√∂vzu',
      colorBlue: 'Mavi',
      colorRed: 'Qƒ±rmƒ±zƒ±',
      colorGreen: 'Ya≈üƒ±l',
      colorOrange: 'Narƒ±ncƒ±',
      colorPurple: 'B…ôn√∂v≈ü…ôyi',
      colorGray: 'T√ºnd Gri',
      errorEmpty: 'He√ß n…ô daxil edilm…ôyib!',
      errorInvalid: 'ƒ∞fad…ôd…ô icaz…ôsiz simvollar var!',
      errorDivision: 'Sƒ±fƒ±ra b√∂lm…ô x…ôta!',
      errorCalculation: 'N…ôtic…ô hesablana bilm…ôdi!',
      errorExpression: 'ƒ∞fad…ô s…ôhvdir!',
      errorFactorial: 'Faktorial x…ôta!',
      errorNumber: '∆èd…ôd daxil edin!'
    },
    en: {
      title: 'KenanCalc - Scientific Calculator',
      history: 'History',
      constants: 'Physical Constants',
      clear: 'Clear',
      themeLight: 'Light Theme',
      themeDark: 'Dark Theme',
      colorBlue: 'Blue',
      colorRed: 'Red',
      colorGreen: 'Green',
      colorOrange: 'Orange',
      colorPurple: 'Purple',
      colorGray: 'Dark Gray',
      errorEmpty: 'Nothing entered!',
      errorInvalid: 'Invalid characters in expression!',
      errorDivision: 'Division by zero error!',
      errorCalculation: 'Could not calculate result!',
      errorExpression: 'Invalid expression!',
      errorFactorial: 'Factorial error!',
      errorNumber: 'Enter a number!'
    },
    tr: {
      title: 'KenanCalc - Bilimsel Hesap Makinesi',
      history: 'Ge√ßmi≈ü',
      constants: 'Fiziksel Sabitler',
      clear: 'Temizle',
      themeLight: 'A√ßƒ±k Tema',
      themeDark: 'Koyu Tema',
      colorBlue: 'Mavi',
      colorRed: 'Kƒ±rmƒ±zƒ±',
      colorGreen: 'Ye≈üil',
      colorOrange: 'Turuncu',
      colorPurple: 'Mor',
      colorGray: 'Koyu Gri',
      errorEmpty: 'Hi√ßbir ≈üey girilmedi!',
      errorInvalid: 'ƒ∞fadede ge√ßersiz karakterler var!',
      errorDivision: 'Sƒ±fƒ±ra b√∂lme hatasƒ±!',
      errorCalculation: 'Sonu√ß hesaplanamadƒ±!',
      errorExpression: 'Ge√ßersiz ifade!',
      errorFactorial: 'Fakt√∂riyel hatasƒ±!',
      errorNumber: 'Bir sayƒ± girin!'
    },
    ru: {
      title: 'KenanCalc - –ù–∞—É—á–Ω—ã–π –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä',
      history: '–ò—Å—Ç–æ—Ä–∏—è',
      constants: '–§–∏–∑–∏—á–µ—Å–∫–∏–µ –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã',
      clear: '–û—á–∏—Å—Ç–∏—Ç—å',
      themeLight: '–°–≤–µ—Ç–ª–∞—è –¢–µ–º–∞',
      themeDark: '–¢—ë–º–Ω–∞—è –¢–µ–º–∞',
      colorBlue: '–°–∏–Ω–∏–π',
      colorRed: '–ö—Ä–∞—Å–Ω—ã–π',
      colorGreen: '–ó–µ–ª—ë–Ω—ã–π',
      colorOrange: '–û—Ä–∞–Ω–∂–µ–≤—ã–π',
      colorPurple: '–§–∏–æ–ª–µ—Ç–æ–≤—ã–π',
      colorGray: '–¢—ë–º–Ω–æ-—Å–µ—Ä—ã–π',
      errorEmpty: '–ù–∏—á–µ–≥–æ –Ω–µ –≤–≤–µ–¥–µ–Ω–æ!',
      errorInvalid: '–ù–µ–¥–æ–ø—É—Å—Ç–∏–º—ã–µ —Å–∏–º–≤–æ–ª—ã –≤ –≤—ã—Ä–∞–∂–µ–Ω–∏–∏!',
      errorDivision: '–î–µ–ª–µ–Ω–∏–µ –Ω–∞ –Ω–æ–ª—å!',
      errorCalculation: '–ù–µ —É–¥–∞–ª–æ—Å—å –≤—ã—á–∏—Å–ª–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç!',
      errorExpression: '–ù–µ–≤–µ—Ä–Ω–æ–µ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ!',
      errorFactorial: '–û—à–∏–±–∫–∞ —Ñ–∞–∫—Ç–æ—Ä–∏–∞–ª–∞!',
      errorNumber: '–í–≤–µ–¥–∏—Ç–µ —á–∏—Å–ª–æ!'
    }
  };

  // Fiziki sabitl…ôr
  const physicsConstants = {
    'c': {
      names: {
        az: 'ƒ∞≈üƒ±q s√ºr…ôti',
        en: 'Speed of light',
        tr: 'I≈üƒ±k hƒ±zƒ±',
        ru: '–°–∫–æ—Ä–æ—Å—Ç—å —Å–≤–µ—Ç–∞'
      },
      value: 299792458,
      unit: 'm/s'
    },
    'h': {
      names: {
        az: 'Planck sabiti',
        en: 'Planck constant',
        tr: 'Planck sabiti',
        ru: '–ü–æ—Å—Ç–æ—è–Ω–Ω–∞—è –ü–ª–∞–Ω–∫–∞'
      },
      value: 6.62607015e-34,
      unit: 'J‚ãÖs'
    },
    'G': {
      names: {
        az: 'Qravitasiya sabiti',
        en: 'Gravitational constant',
        tr: 'Gravitasyon sabiti',
        ru: '–ì—Ä–∞–≤–∏—Ç–∞—Ü–∏–æ–Ω–Ω–∞—è –ø–æ—Å—Ç–æ—è–Ω–Ω–∞—è'
      },
      value: 6.67430e-11,
      unit: 'm¬≥‚ãÖkg‚Åª¬π‚ãÖs‚Åª¬≤'
    },
    'e_charge': {
      names: {
        az: 'Elektron y√ºk√º',
        en: 'Elementary charge',
        tr: 'Elektron y√ºk√º',
        ru: '–≠–ª–µ–º–µ–Ω—Ç–∞—Ä–Ω—ã–π –∑–∞—Ä—è–¥'
      },
      value: 1.602176634e-19,
      unit: 'C'
    },
    'me': {
      names: {
        az: 'Elektron k√ºtl…ôsi',
        en: 'Electron mass',
        tr: 'Elektron k√ºtlesi',
        ru: '–ú–∞—Å—Å–∞ —ç–ª–µ–∫—Ç—Ä–æ–Ω–∞'
      },
      value: 9.1093837015e-31,
      unit: 'kg'
    },
    'mp': {
      names: {
        az: 'Proton k√ºtl…ôsi',
        en: 'Proton mass',
        tr: 'Proton k√ºtlesi',
        ru: '–ú–∞—Å—Å–∞ –ø—Ä–æ—Ç–æ–Ω–∞'
      },
      value: 1.67262192369e-27,
      unit: 'kg'
    },
    'Na': {
      names: {
        az: 'Avogadro sabiti',
        en: 'Avogadro constant',
        tr: 'Avogadro sabiti',
        ru: '–ü–æ—Å—Ç–æ—è–Ω–Ω–∞—è –ê–≤–æ–≥–∞–¥—Ä–æ'
      },
      value: 6.02214076e23,
      unit: 'mol‚Åª¬π'
    },
    'k': {
      names: {
        az: 'Boltzmann sabiti',
        en: 'Boltzmann constant',
        tr: 'Boltzmann sabiti',
        ru: '–ü–æ—Å—Ç–æ—è–Ω–Ω–∞—è –ë–æ–ª—å—Ü–º–∞–Ω–∞'
      },
      value: 1.380649e-23,
      unit: 'J‚ãÖK‚Åª¬π'
    },
    'R': {
      names: {
        az: 'Qaz sabiti',
        en: 'Gas constant',
        tr: 'Gaz sabiti',
        ru: '–ì–∞–∑–æ–≤–∞—è –ø–æ—Å—Ç–æ—è–Ω–Ω–∞—è'
      },
      value: 8.314462618,
      unit: 'J‚ãÖmol‚Åª¬π‚ãÖK‚Åª¬π'
    }
  };

  // Vibration feedback funksiyasƒ±
  function vibrate(duration = 50) {
    if ('vibrate' in navigator) {
      navigator.vibrate(duration);
    }
  }

  // Funksiya: hesablama d√ºym…ôl…ôrin…ô klik
  function handleClick(value) {
    // Mobil cihazlarda vibration feedback
    vibrate(30);
    
    if(display.classList.contains('error')) {
      display.classList.remove('error');
      display.textContent = '';
    }
    if(display.classList.contains('success')) {
      display.classList.remove('success');
    }

    if(display.textContent === '0' && !isOperator(value)) {
      display.textContent = value;
    } else {
      display.textContent += value;
    }
  }

  function isOperator(char) {
    return ['+', '-', '*', '/', '.', '(', ')'].includes(char);
  }

  // Hesablama
  function calculate() {
    // Hesablama zamanƒ± daha uzun vibration
    vibrate(100);
    
    try {
      const expr = display.textContent;
      if(expr.trim() === '' || expr === '0') {
        showError(getText('errorEmpty'));
        return;
      }

      // T…ôhl√ºk…ôsizlik yoxlamasƒ±
      // Yalnƒ±z icaz…ô veril…ôn funksiyalar v…ô operatorlar √º√ß√ºn regex
      if(!/^([0-9+\-*/(). ]+|Math\.(sin|cos|tan|asin|acos|atan|sinh|cosh|tanh|asinh|log|log10|exp|pow|sqrt|cbrt|abs|floor|ceil|round|PI|E))*$/.test(expr)) {
        showError(getText('errorInvalid'));
        return;
      }

      const result = Function(`"use strict"; return (${expr})`)();

      if(result === Infinity || result === -Infinity) {
        showError(getText('errorDivision'));
        return;
      }
      if(isNaN(result)) {
        showError(getText('errorCalculation'));
        return;
      }

      addHistory(expr + ' = ' + result);
      display.textContent = result;
      display.classList.add('success');

    } catch {
      showError(getText('errorExpression'));
    }
  }

  function showError(msg) {
    display.textContent = msg;
    display.classList.add('error');
  }

  function backspace() {
    vibrate(30);
    if(display.classList.contains('error')) {
      display.classList.remove('error');
      display.textContent = '0';
      return;
    }
    if(display.textContent.length > 1) {
      display.textContent = display.textContent.slice(0, -1);
    } else {
      display.textContent = '0';
    }
  }

  function clearDisplay() {
    vibrate(50);
    display.classList.remove('error', 'success');
    display.textContent = '0';
  }

  // Yeni elmi funksiyalar
  function factorial() {
    const n = parseFloat(display.textContent);
    if(isNaN(n) || n < 0 || n > 170 || !Number.isInteger(n)) {
      showError(getText('errorFactorial'));
      return;
    }
    let result = 1;
    for(let i = 2; i <= n; i++) {
      result *= i;
    }
    addHistory(n + '! = ' + result);
    display.textContent = result;
  }

  function randomNumber() {
    const result = Math.random();
    addHistory('rand() = ' + result);
    display.textContent = result;
  }

  function degToRad() {
    const deg = parseFloat(display.textContent);
    if(isNaN(deg)) {
      showError(getText('errorNumber'));
      return;
    }
    const rad = deg * Math.PI / 180;
    addHistory(deg + '¬∞ = ' + rad + ' rad');
    display.textContent = rad;
  }

  // Tarix√ß…ô funksiyalarƒ±
  function addHistory(item) {
    history.unshift(item);
    if(history.length > 30) history.pop();
    renderHistory();
  }

  function renderHistory() {
    historyList.innerHTML = '';
    history.forEach((item) => {
      const li = document.createElement('li');
      li.textContent = item;
      li.onclick = () => {
        const result = item.split('=')[1]?.trim();
        if(result) {
          display.textContent = result;
          display.classList.remove('error');
        }
      };
      historyList.appendChild(li);
    });
  }

  // Sabitl…ôr paneli
  function renderConstants() {
    constantsList.innerHTML = '';
    const currentLang = languageSelect.value;
    Object.entries(physicsConstants).forEach(([key, constant]) => {
      const div = document.createElement('div');
      div.className = 'constant-item';
      div.innerHTML = `
        <span class="constant-name">${constant.names[currentLang]}</span>
        <span class="constant-value">${constant.value.toExponential(3)}</span>
      `;
      div.onclick = () => {
        display.textContent = constant.value;
        display.classList.remove('error');
      };
      constantsList.appendChild(div);
    });
  }

  // M…ôtn alma funksiyasƒ±
  function getText(key) {
    const lang = languageSelect.value;
    return texts[lang][key] || texts.az[key] || '';
  }

  // Dil yenil…ôm…ô funksiyasƒ±
  function updateLanguage() {
    // Ba≈ülƒ±q
    document.querySelector('h1').textContent = getText('title');
    
    // Tarix√ß…ô ba≈ülƒ±ƒüƒ±
    document.querySelector('#history h2').textContent = getText('history');
    
    // Sabitl…ôr ba≈ülƒ±ƒüƒ±
    document.querySelector('#constants h2').textContent = getText('constants');
    
    // T…ômizl…ô d√ºym…ôsi
    clearHistoryBtn.textContent = getText('clear');
    
    // M√∂vzu d√ºym…ôsi
    if(document.body.classList.contains('light')) {
      themeToggleBtn.textContent = getText('themeDark');
    } else {
      themeToggleBtn.textContent = getText('themeLight');
    }
    
    // R…ông se√ßimi adlarƒ±
    updateColorNames();
    
    // Sabitl…ôri yenil…ô
    renderConstants();
  }

  // R…ông adlarƒ±nƒ± yenil…ô
  function updateColorNames() {
    const colorOptions = colorPicker.options;
    const colorKeys = ['colorBlue', 'colorRed', 'colorGreen', 'colorOrange', 'colorPurple', 'colorGray'];
    
    for(let i = 0; i < colorOptions.length && i < colorKeys.length; i++) {
      colorOptions[i].textContent = getText(colorKeys[i]);
    }
  }

  // M√∂vzu d…ôyi≈üm…ô
  function toggleTheme() {
    if(document.body.classList.contains('light')) {
      document.body.classList.replace('light', 'dark');
      themeToggleBtn.textContent = getText('themeLight');
    } else {
      document.body.classList.replace('dark', 'light');
      themeToggleBtn.textContent = getText('themeDark');
    }
  }

  // R…ông d…ôyi≈üm…ô
  function updateMainColor(hex) {
    document.documentElement.style.setProperty('--main-color', hex);
    const rgb = hexToRgb(hex);
    document.documentElement.style.setProperty('--main-rgb', rgb);
  }

  function hexToRgb(hex) {
    hex = hex.replace(/^#/, '');
    if(hex.length === 3) {
      hex = hex.split('').map(c => c + c).join('');
    }
    const bigint = parseInt(hex, 16);
    const r = (bigint >> 16) & 255;
    const g = (bigint >> 8) & 255;
    const b = bigint & 255;
    return `${r},${g},${b}`;
  }

  // Event listeners
  themeToggleBtn.addEventListener('click', toggleTheme);
  colorPicker.addEventListener('change', () => updateMainColor(colorPicker.value));
  languageSelect.addEventListener('change', updateLanguage);
  clearHistoryBtn.addEventListener('click', () => {
    history = [];
    renderHistory();
  });

  // Klaviatura d…ôst…ôyi
  document.addEventListener('keydown', (e) => {
    const allowedKeys = '0123456789+-*/().';
    if(allowedKeys.includes(e.key)) {
      e.preventDefault();
      handleClick(e.key);
    } else if(e.key === 'Enter' || e.key === '=') {
      e.preventDefault();
      calculate();
    } else if(e.key === 'Backspace') {
      e.preventDefault();
      backspace();
    } else if(e.key.toLowerCase() === 'c') {
      e.preventDefault();
      clearDisplay();
    }
  });

  // Swipe gesture d…ôst…ôyi tarix√ß…ô √º√ß√ºn
  function addSwipeSupport() {
    let startX, startY, distX, distY;
    const threshold = 100; // minimum swipe distance
    const restraint = 100; // maximum distance perpendicular to swipe direction
    
    historyList.addEventListener('touchstart', function(e) {
      const touchobj = e.changedTouches[0];
      startX = touchobj.pageX;
      startY = touchobj.pageY;
    }, {passive: true});
    
    historyList.addEventListener('touchend', function(e) {
      const touchobj = e.changedTouches[0];
      distX = touchobj.pageX - startX;
      distY = touchobj.pageY - startY;
      
      if (Math.abs(distX) >= threshold && Math.abs(distY) <= restraint) {
        if (distX > 0) {
          // Saƒüa swipe - tarix√ß…ôni t…ômizl…ô
          if(history.length > 0) {
            vibrate(100);
            history = [];
            renderHistory();
          }
        }
      }
    }, {passive: true});
  }

  // Orientation d…ôyi≈üikliyi dinl…ôyicisi
  function handleOrientationChange() {
    // Orientation d…ôyi≈üdikd…ô layout-u yenil…ô
    setTimeout(() => {
      updateMainColor(colorPicker.value);
      renderConstants();
    }, 100);
  }

  // Ba≈ülanƒüƒ±c
  function initialize() {
    updateMainColor(colorPicker.value);
    updateLanguage();
    renderHistory();
    renderConstants();
    addSwipeSupport();
    
    // Orientation change listener
    window.addEventListener('orientationchange', handleOrientationChange);
    window.addEventListener('resize', handleOrientationChange);
  }

  // M√ºkafatlƒ± Reklam Sistemi
  let isPremium = false;
  let premiumEndTime = 0;
  let adEarnings = parseFloat(localStorage.getItem('adEarnings') || '0');
  
  // Premium funksiyalar
  function usePremiumFunction(funcType) {
    if (!isPremium) {
      showRewardedAdOffer(funcType);
      return;
    }
    
    // Premium funksiya istifad…ôsi
    switch(funcType) {
      case 'log10':
        display.textContent += 'Math.log10(';
        break;
      case 'ln':
        display.textContent += 'Math.log(';
        break;
      case 'exp':
        display.textContent += 'Math.exp(';
        break;
    }
  }
  
  // M√ºkafatlƒ± reklam t…ôklifi
  function showRewardedAdOffer(funcType) {
    const modal = document.createElement('div');
    modal.style.cssText = `
      position: fixed; top: 0; left: 0; width: 100%; height: 100%;
      background: rgba(0,0,0,0.8); z-index: 10000;
      display: flex; justify-content: center; align-items: center;
    `;
    
    const popup = document.createElement('div');
    popup.style.cssText = `
      background: var(--bg-color); padding: 30px; border-radius: 20px;
      text-align: center; max-width: 350px; margin: 20px;
      box-shadow: 0 20px 40px rgba(0,0,0,0.3);
    `;
    
    const funcNames = {
      log10: 'Onluq Loqarifm',
      ln: 'T…ôbii Loqarifm', 
      exp: 'Eksponensial'
    };
    
    popup.innerHTML = `
      <h3 style="color: var(--main-color); margin-bottom: 20px;">
        üîí Premium Funksiya
      </h3>
      <p style="margin-bottom: 20px; color: var(--text-color);">
        <strong>${funcNames[funcType]}</strong> istifad…ô etm…ôk √º√ß√ºn reklam izl…ôyin!
      </p>
      <div style="margin-bottom: 20px;">
        <div style="font-size: 0.9em; opacity: 0.8; margin-bottom: 10px;">
          ‚Ä¢ 30 saniy…ô reklam izl…ôyin<br>
          ‚Ä¢ 5 d…ôqiq…ô premium …ôld…ô edin<br>
        </div>
      </div>
      <button onclick="watchRewardedAd('${funcType}')" 
              style="background: linear-gradient(135deg, #4CAF50, #45a049); 
                     color: white; border: none; padding: 12px 25px; 
                     border-radius: 25px; font-size: 1rem; cursor: pointer; 
                     margin-right: 10px;">
        üé• Reklam ƒ∞zl…ô
      </button>
      <button onclick="closeModal()" 
              style="background: #e74c3c; color: white; border: none; 
                     padding: 12px 25px; border-radius: 25px; 
                     font-size: 1rem; cursor: pointer;">
        ƒ∞mtina
      </button>
    `;
    
    modal.appendChild(popup);
    document.body.appendChild(modal);
    
    window.closeModal = () => {
      document.body.removeChild(modal);
    };
  }
  
  // Reklam izl…ôm…ô simulyasiyasi
  function watchRewardedAd(funcType) {
    closeModal();
    
    // Reklam izl…ôm…ô animasiyasi
    const adModal = document.createElement('div');
    adModal.style.cssText = `
      position: fixed; top: 0; left: 0; width: 100%; height: 100%;
      background: #000; z-index: 10001; display: flex;
      justify-content: center; align-items: center; flex-direction: column;
    `;
    
    adModal.innerHTML = `
      <div style="color: white; text-align: center;">
        <h2>üé• Reklam ƒ∞zl…ônir...</h2>
        <div style="width: 300px; height: 20px; background: #333; 
                    border-radius: 10px; overflow: hidden; margin: 20px 0;">
          <div id="adProgress" style="width: 0%; height: 100%; 
                                      background: linear-gradient(90deg, #4CAF50, #45a049); 
                                      transition: width 0.1s ease;"></div>
        </div>
        <p id="adTimer">30 saniy…ô qalƒ±r...</p>
        <p style="font-size: 0.9em; opacity: 0.7;">Reklamƒ± tam izl…ôyin ki, m√ºkafatƒ± alƒ±n</p>
      </div>
    `;
    
    document.body.appendChild(adModal);
    
    // 30 saniy…ôlik geri sayƒ±m
    let timeLeft = 30;
    const timer = setInterval(() => {
      timeLeft--;
      const progress = ((30 - timeLeft) / 30) * 100;
      document.getElementById('adProgress').style.width = progress + '%';
      document.getElementById('adTimer').textContent = timeLeft + ' saniy…ô qalƒ±r...';
      
      if (timeLeft <= 0) {
        clearInterval(timer);
        completeRewardedAd(funcType, adModal);
      }
    }, 1000);
  }
  
  // Reklam tamamlandƒ±qda
  function completeRewardedAd(funcType, adModal) {
    document.body.removeChild(adModal);
    
    // Premium aktivl…ô≈üdir
    isPremium = true;
    premiumEndTime = Date.now() + (5 * 60 * 1000); // 5 d…ôqiq…ô
    
    // G…ôlir …ôlav…ô et
    adEarnings += 0.05;
    localStorage.setItem('adEarnings', adEarnings.toString());
    
    // Premium status g√∂st…ôr
    showPremiumStatus();
    
    // Premium d√ºym…ôl…ôri aktiv et
    updatePremiumButtons();
    
    // ƒ∞st…ônil…ôn funksiyani i≈ül…ôt
    usePremiumFunction(funcType);
    
    // M√ºkafat popupƒ±
    showRewardPopup();
  }
  
  // Premium status g√∂st…ôrici
  function showPremiumStatus() {
    const statusDiv = document.getElementById('premiumStatus');
    statusDiv.style.display = 'block';
    
    const timer = setInterval(() => {
      const timeLeft = Math.max(0, premiumEndTime - Date.now());
      if (timeLeft <= 0) {
        isPremium = false;
        statusDiv.style.display = 'none';
        updatePremiumButtons();
        clearInterval(timer);
        return;
      }
      
      const minutes = Math.floor(timeLeft / 60000);
      const seconds = Math.floor((timeLeft % 60000) / 1000);
      document.getElementById('premiumTimer').textContent = 
        `${minutes}:${seconds.toString().padStart(2, '0')}`;
    }, 1000);
  }
  
  // Premium d√ºym…ôl…ôri yenile
  function updatePremiumButtons() {
    const premiumBtns = document.querySelectorAll('.premium-btn');
    premiumBtns.forEach(btn => {
      btn.disabled = !isPremium;
      if (isPremium) {
        btn.classList.add('unlocked');
      } else {
        btn.classList.remove('unlocked');
      }
    });
  }
  
  // M√ºkafat popupƒ±
  function showRewardPopup() {
    const popup = document.createElement('div');
    popup.style.cssText = `
      position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%);
      background: var(--bg-color); border: 3px solid #4CAF50;
      border-radius: 20px; padding: 30px; z-index: 10002;
      text-align: center; box-shadow: 0 20px 40px rgba(0,0,0,0.3);
      animation: rewardShow 0.5s ease-out;
    `;
    
    popup.innerHTML = `
      <h2 style="color: #4CAF50; margin-bottom: 20px;">
        üéâ T…ôbrikl…ôr!
      </h2>
      <p style="margin-bottom: 15px; color: var(--text-color);">
        ‚≠ê 5 d…ôqiq…ô Premium aktiv edildi!<br>
        üí∞ $0.05 qazandƒ±nƒ±z!<br>
        üìä √úmumi g…ôlir: $${adEarnings.toFixed(4)}
      </p>
      <button onclick="this.parentElement.remove()" 
              style="background: #4CAF50; color: white; border: none; 
                     padding: 10px 20px; border-radius: 15px; 
                     font-size: 1rem; cursor: pointer;">
        Davam et
      </button>
    `;
    
    document.body.appendChild(popup);
    
    // 3 saniy…ô sonra avtomatik baƒüla
    setTimeout(() => {
      if (popup.parentElement) {
        popup.remove();
      }
    }, 3000);
  }
  
  // Reward Ad d√ºym…ôsi event listener
  document.getElementById('rewardAdBtn').addEventListener('click', () => {
    showRewardedAdOffer('log10');
  });
  
  // Ba≈ülanqƒ±cda premium d√ºym…ôl…ôri deaktiv et
  updatePremiumButtons();
  
  initialize();
  
  // ===== YENƒ∞ FUNKSƒ∞YALAR =====
  
  // Vahid √ßevirm…ô sistemi
  function showUnitConverter() {
    const modal = document.createElement('div');
    modal.style.cssText = `
      position: fixed; top: 0; left: 0; width: 100%; height: 100%;
      background: rgba(0,0,0,0.8); z-index: 10000;
      display: flex; justify-content: center; align-items: center;
    `;
    
    // Klaviatura d…ôst…ôyi
    const handleKeyPress = (e) => {
      if (e.key === 'Escape') {
        closeModal();
      } else if (e.key === 'Enter') {
        convertUnit();
      }
    };
    
    document.addEventListener('keydown', handleKeyPress);
    
    const popup = document.createElement('div');
    popup.style.cssText = `
      background: var(--bg-color); padding: 30px; border-radius: 20px;
      text-align: center; max-width: 400px; margin: 20px;
      box-shadow: 0 20px 40px rgba(0,0,0,0.3); max-height: 80vh; overflow-y: auto;
    `;
    
    popup.innerHTML = `
      <h3 style="color: var(--main-color); margin-bottom: 20px;">üìè Vahid √áevirm…ôl…ôri</h3>
      
      <div style="margin-bottom: 20px;">
        <select id="unitType" style="padding: 8px; margin: 5px; border-radius: 8px; border: 1px solid #ccc;">
          <option value="length">Uzunluq</option>
          <option value="weight">√á…ôki</option>
          <option value="temperature">Temperatur</option>
          <option value="area">Sah…ô</option>
        </select>
      </div>
      
      <div style="display: flex; gap: 10px; margin-bottom: 15px;">
        <input type="number" id="fromValue" placeholder="D…ôy…ôr" 
               style="padding: 8px; border-radius: 8px; border: 1px solid #ccc; width: 100px;">
        <select id="fromUnit" style="padding: 8px; border-radius: 8px; border: 1px solid #ccc;"></select>
      </div>
      
      <div style="display: flex; gap: 10px; margin-bottom: 15px;">
        <span style="align-self: center;">‚Üí</span>
        <select id="toUnit" style="padding: 8px; border-radius: 8px; border: 1px solid #ccc;"></select>
      </div>
      
      <div style="margin: 10px 0;">
        <button onclick="convertUnit()" 
                style="background: var(--main-color); color: white; border: none; 
                       padding: 10px 20px; border-radius: 10px; cursor: pointer;">
          √áevir ‚Üí
        </button>
      </div>
      
      <div id="conversionResult" style="margin-top: 15px; padding: 10px; 
           background: rgba(var(--main-rgb), 0.1); border-radius: 10px; display: none;">
      </div>
      
      <button onclick="closeModal()" 
              style="background: #e74c3c; color: white; border: none; 
                     padding: 10px 20px; border-radius: 10px; margin-top: 15px; cursor: pointer;">
        Baƒüla
      </button>
    `;
    
    modal.appendChild(popup);
    document.body.appendChild(modal);
    
    // Vahid se√ßiml…ôrini y√ºkl…ô
    loadUnitOptions();
    
    // Vahid tipi d…ôyi≈üdikd…ô yenil…ô
    document.getElementById('unitType').addEventListener('change', loadUnitOptions);
    
    window.closeModal = () => {
      document.removeEventListener('keydown', handleKeyPress);
      document.body.removeChild(modal);
    };
  }
  
  // Vahid se√ßiml…ôrini y√ºkl…ô
  function loadUnitOptions() {
    const unitType = document.getElementById('unitType').value;
    const fromUnit = document.getElementById('fromUnit');
    const toUnit = document.getElementById('toUnit');
    
    const units = {
      length: ['metr', 'kilometr', 'santimetr', 'millimetr', 'yard', 'fut', 'd√ºym'],
      weight: ['kiloqram', 'qram', 'ton', 'funt', 'ons'],
      temperature: ['Celsius', 'Fahrenheit', 'Kelvin'],
      area: ['kvadrat metr', 'hektar', 'akr', 'kvadrat fut']
    };
    
    const currentUnits = units[unitType];
    fromUnit.innerHTML = '';
    toUnit.innerHTML = '';
    
    currentUnits.forEach(unit => {
      fromUnit.innerHTML += `<option value="${unit}">${unit}</option>`;
      toUnit.innerHTML += `<option value="${unit}">${unit}</option>`;
    });
    
    // To unit-i f…ôrqli se√ß
    if (currentUnits.length > 1) {
      toUnit.selectedIndex = 1;
    }
  }
  
  // Vahid √ßevir
  function convertUnit() {
    const fromValue = parseFloat(document.getElementById('fromValue').value);
    const fromUnit = document.getElementById('fromUnit').value;
    const toUnit = document.getElementById('toUnit').value;
    const unitType = document.getElementById('unitType').value;
    
    if (isNaN(fromValue)) {
      alert('Z…ôhm…ôt olmasa d√ºzg√ºn d…ôy…ôr daxil edin!');
      return;
    }
    
    let result = 0;
    
    // √áevirm…ô d√ºsturlarƒ±
    if (unitType === 'length') {
      result = convertLength(fromValue, fromUnit, toUnit);
    } else if (unitType === 'weight') {
      result = convertWeight(fromValue, fromUnit, toUnit);
    } else if (unitType === 'temperature') {
      result = convertTemperature(fromValue, fromUnit, toUnit);
    } else if (unitType === 'area') {
      result = convertArea(fromValue, fromUnit, toUnit);
    }
    
    document.getElementById('conversionResult').innerHTML = 
      `<strong>${fromValue} ${fromUnit} = ${result.toFixed(4)} ${toUnit}</strong>`;
    document.getElementById('conversionResult').style.display = 'block';
    
    // Achievement …ôlav…ô et
    addAchievement('converter', 'Vahid √ßevirm…ô istifad…ô etdi');
  }
  
  // Uzunluq √ßevirm…ôsi
  function convertLength(value, from, to) {
    const toMeter = {
      'metr': 1,
      'kilometr': 1000,
      'santimetr': 0.01,
      'millimetr': 0.001,
      'yard': 0.9144,
      'fut': 0.3048,
      'd√ºym': 0.0254
    };
    
    const meters = value * toMeter[from];
    return meters / toMeter[to];
  }
  
  // √á…ôki √ßevirm…ôsi
  function convertWeight(value, from, to) {
    const toKg = {
      'kiloqram': 1,
      'qram': 0.001,
      'ton': 1000,
      'funt': 0.453592,
      'ons': 0.0283495
    };
    
    const kg = value * toKg[from];
    return kg / toKg[to];
  }
  
  // Temperatur √ßevirm…ôsi
  function convertTemperature(value, from, to) {
    let celsius = 0;
    
    // ∆èvv…ôlc…ô Celsius-a √ßevir
    if (from === 'Celsius') celsius = value;
    else if (from === 'Fahrenheit') celsius = (value - 32) * 5/9;
    else if (from === 'Kelvin') celsius = value - 273.15;
    
    // Sonra h…ôd…ôf vahid…ô √ßevir
    if (to === 'Celsius') return celsius;
    else if (to === 'Fahrenheit') return celsius * 9/5 + 32;
    else if (to === 'Kelvin') return celsius + 273.15;
  }
  
  // Sah…ô √ßevirm…ôsi
  function convertArea(value, from, to) {
    const toSqMeter = {
      'kvadrat metr': 1,
      'hektar': 10000,
      'akr': 4046.86,
      'kvadrat fut': 0.092903
    };
    
    const sqMeters = value * toSqMeter[from];
    return sqMeters / toSqMeter[to];
  }
  
  // Riyaziyyat oyunu
  function showMathGame() {
    const modal = document.createElement('div');
    modal.style.cssText = `
      position: fixed; top: 0; left: 0; width: 100%; height: 100%;
      background: rgba(0,0,0,0.8); z-index: 10000;
      display: flex; justify-content: center; align-items: center;
    `;
    
    const popup = document.createElement('div');
    popup.style.cssText = `
      background: var(--bg-color); padding: 30px; border-radius: 20px;
      text-align: center; max-width: 400px; margin: 20px;
      box-shadow: 0 20px 40px rgba(0,0,0,0.3);
    `;
    
    let score = 0;
    let timeLeft = 60;
    let gameInterval;
    
    function generateQuestion() {
      const operations = ['+', '-', '*'];
      const num1 = Math.floor(Math.random() * 20) + 1;
      const num2 = Math.floor(Math.random() * 20) + 1;
      const operation = operations[Math.floor(Math.random() * operations.length)];
      
      let answer;
      switch(operation) {
        case '+': answer = num1 + num2; break;
        case '-': answer = num1 - num2; break;
        case '*': answer = num1 * num2; break;
      }
      
      return { question: `${num1} ${operation} ${num2} = ?`, answer: answer };
    }
    
    let currentQuestion = generateQuestion();
    
    popup.innerHTML = `
      <h3 style="color: var(--main-color); margin-bottom: 20px;">üéÆ Riyaziyyat Oyunu</h3>
      
      <div style="margin-bottom: 20px;">
        <div style="font-size: 1.2em; margin-bottom: 10px;">${currentQuestion.question}</div>
        <input type="number" id="gameAnswer" placeholder="Cavabƒ±nƒ±z" 
               style="padding: 10px; border-radius: 8px; border: 1px solid #ccc; width: 150px;">
      </div>
      
      <div style="margin-bottom: 15px;">
        <div>Xal: <span id="gameScore">${score}</span></div>
        <div>Vaxt: <span id="gameTime">${timeLeft}</span> saniy…ô</div>
      </div>
      
      <button onclick="checkAnswer()" 
              style="background: var(--main-color); color: white; border: none; 
                     padding: 10px 20px; border-radius: 10px; cursor: pointer;">
        Cavabla
      </button>
      
      <button onclick="closeModal()" 
              style="background: #e74c3c; color: white; border: none; 
                     padding: 10px 20px; border-radius: 10px; margin-left: 10px; cursor: pointer;">
        Bitir
      </button>
    `;
    
    modal.appendChild(popup);
    document.body.appendChild(modal);
    
    // Input sah…ôsini avtomatik fokusla
    setTimeout(() => {
      const input = document.getElementById('gameAnswer');
      if (input) input.focus();
    }, 100);
    
    // Klaviatura d…ôst…ôyi
    const handleGameKeyPress = (e) => {
      if (e.key === 'Escape') {
        closeModal();
      } else if (e.key === 'Enter') {
        checkAnswer();
      }
    };
    
    document.addEventListener('keydown', handleGameKeyPress);
    
    // Oyun vaxtƒ±nƒ± ba≈ülat
    gameInterval = setInterval(() => {
      timeLeft--;
      document.getElementById('gameTime').textContent = timeLeft;
      
      if (timeLeft <= 0) {
        clearInterval(gameInterval);
        endGame();
      }
    }, 1000);
    
    window.checkAnswer = () => {
      const userAnswer = parseInt(document.getElementById('gameAnswer').value);
      
      if (userAnswer === currentQuestion.answer) {
        score += 10;
        document.getElementById('gameScore').textContent = score;
        currentQuestion = generateQuestion();
        document.getElementById('gameAnswer').value = '';
        document.querySelector('div[style*="font-size: 1.2em"]').textContent = currentQuestion.question;
      } else {
        alert('Yanlƒ±≈ü cavab! D√ºzg√ºn cavab: ' + currentQuestion.answer);
      }
    };
    
    window.endGame = () => {
      clearInterval(gameInterval);
      popup.innerHTML = `
        <h3 style="color: var(--main-color); margin-bottom: 20px;">üéâ Oyun Bitdi!</h3>
        <div style="margin-bottom: 20px;">
          <div>Yekun xal: <strong>${score}</strong></div>
          <div>D…ôqiq cavablar: <strong>${Math.floor(score/10)}</strong></div>
        </div>
        <button onclick="closeModal()" 
                style="background: var(--main-color); color: white; border: none; 
                       padding: 10px 20px; border-radius: 10px; cursor: pointer;">
          Baƒüla
        </button>
      `;
      
      // Achievement …ôlav…ô et
      addAchievement('mathGame', `Riyaziyyat oyununda ${score} xal qazandƒ±`);
    };
    
    window.closeModal = () => {
      clearInterval(gameInterval);
      document.removeEventListener('keydown', handleGameKeyPress);
      document.body.removeChild(modal);
    };
  }
  
  // Achievement sistemi
  let achievements = JSON.parse(localStorage.getItem('achievements') || '[]');
  let totalCalculations = parseInt(localStorage.getItem('totalCalculations') || '0');
  
  function addAchievement(type, description) {
    const achievement = {
      id: type + '_' + Date.now(),
      type: type,
      description: description,
      date: new Date().toLocaleDateString(),
      earned: true
    };
    
    // T…ôkrarlanmayan achievement-l…ôr √º√ß√ºn yoxla
    const existing = achievements.find(a => a.type === type);
    if (!existing) {
      achievements.push(achievement);
      localStorage.setItem('achievements', JSON.stringify(achievements));
      showAchievementNotification(description);
    }
  }
  
  function showAchievementNotification(description) {
    const notification = document.createElement('div');
    notification.style.cssText = `
      position: fixed; top: 20px; right: 20px; background: linear-gradient(135deg, #4CAF50, #45a049);
      color: white; padding: 15px 20px; border-radius: 10px; z-index: 10003;
      box-shadow: 0 4px 15px rgba(0,0,0,0.3); animation: slideIn 0.5s ease;
    `;
    
    notification.innerHTML = `
      <div style="display: flex; align-items: center; gap: 10px;">
        <span style="font-size: 1.5em;">üèÜ</span>
        <div>
          <div style="font-weight: bold;">M√ºkafat Qazanƒ±ldƒ±!</div>
          <div style="font-size: 0.9em;">${description}</div>
        </div>
      </div>
    `;
    
    document.body.appendChild(notification);
    
    setTimeout(() => {
      notification.remove();
    }, 3000);
  }
  
  function showAchievements() {
    const modal = document.createElement('div');
    modal.style.cssText = `
      position: fixed; top: 0; left: 0; width: 100%; height: 100%;
      background: rgba(0,0,0,0.8); z-index: 10000;
      display: flex; justify-content: center; align-items: center;
    `;
    
    const popup = document.createElement('div');
    popup.style.cssText = `
      background: var(--bg-color); padding: 30px; border-radius: 20px;
      text-align: center; max-width: 500px; margin: 20px; max-height: 80vh; overflow-y: auto;
    `;
    
    const stats = `
      <div style="margin-bottom: 20px; padding: 15px; background: rgba(var(--main-rgb), 0.1); border-radius: 10px;">
        <div><strong>√úmumi hesablamalar:</strong> ${totalCalculations}</div>
        <div><strong>Qazanƒ±lan m√ºkafatlar:</strong> ${achievements.length}</div>
      </div>
    `;
    
    const achievementsList = achievements.length > 0 ? 
      achievements.map(a => `
        <div style="margin: 10px 0; padding: 10px; background: rgba(76, 175, 80, 0.1); 
                    border-radius: 8px; text-align: left;">
          <div style="font-weight: bold;">üèÜ ${a.description}</div>
          <div style="font-size: 0.9em; opacity: 0.8;">${a.date}</div>
        </div>
      `).join('') : 
      '<div style="opacity: 0.7;">H…ôl…ô he√ß bir m√ºkafat qazanƒ±lmayƒ±b</div>';
    
    popup.innerHTML = `
      <h3 style="color: var(--main-color); margin-bottom: 20px;">üèÜ M√ºkafatlar</h3>
      ${stats}
      <div style="text-align: left;">
        ${achievementsList}
      </div>
      <button onclick="closeModal()" 
              style="background: var(--main-color); color: white; border: none; 
                     padding: 10px 20px; border-radius: 10px; margin-top: 15px; cursor: pointer;">
        Baƒüla
      </button>
    `;
    
    modal.appendChild(popup);
    document.body.appendChild(modal);
    
    window.closeModal = () => {
      document.body.removeChild(modal);
    };
  }
  
  // Hesablama sayƒ±nƒ± artƒ±r
  const originalCalculate = calculate;
  calculate = function() {
    totalCalculations++;
    localStorage.setItem('totalCalculations', totalCalculations.toString());
    
    // H…ôr 10 hesablama √º√ß√ºn achievement
    if (totalCalculations % 10 === 0) {
      addAchievement('calculations', `${totalCalculations} hesablama tamamladƒ±`);
    }
    
    originalCalculate();
  };
  
  // CSS animasiyalarƒ±
  const style = document.createElement('style');
  style.textContent = `
    @keyframes slideIn {
      from { transform: translateX(100%); opacity: 0; }
      to { transform: translateX(0); opacity: 1; }
    }
  `;
  document.head.appendChild(style);
</script>

<!-- PWA Service Worker Registration -->
<script>
  // PWA Service Worker qeydiyyatƒ±
  if ('serviceWorker' in navigator) {
    window.addEventListener('load', () => {
      navigator.serviceWorker.register('/sw.js')
        .then((registration) => {
          console.log('SW qeydiyyatdan ke√ßdi: ', registration.scope);
          
          // Yenil…ônm…ô yoxla
          registration.addEventListener('updatefound', () => {
            const newWorker = registration.installing;
            newWorker.addEventListener('statechange', () => {
              if (newWorker.state === 'installed' && navigator.serviceWorker.controller) {
                // Yeni versiya m√∂vcuddur
                if (confirm('Yeni versiya m√∂vcuddur. Yenil…ônsin?')) {
                  window.location.reload();
                }
              }
            });
          });
        })
        .catch((error) => {
          console.log('SW qeydiyyat x…ôtasƒ±: ', error);
        });
    });
  }

  // PWA qura≈üdƒ±rma d√ºym…ôsi
  let deferredPrompt;
  const installButton = document.createElement('button');
  installButton.textContent = 'üì± App Qura≈üdƒ±r';
  installButton.style.cssText = `
    position: fixed;
    bottom: 20px;
    right: 20px;
    background: var(--main-color);
    color: white;
    border: none;
    padding: 12px 20px;
    border-radius: 25px;
    font-weight: 600;
    cursor: pointer;
    box-shadow: 0 4px 15px rgba(0,0,0,0.3);
    z-index: 1000;
    display: none;
    font-size: 14px;
    transition: all 0.3s ease;
    select, .theme-toggle {
    background: var(--bg-color); color: var(--text-color); border: 2px solid var(--main-color);
    padding: 8px 12px; border-radius: 8px; font-size: 0.9rem; cursor: pointer;
    transition: all 0.3s ease;
  }
  .theme-toggle:hover {
    background: var(--main-color);
    transform: translateY(-2px);
  }
  
  /* M√ºkafatlƒ± Reklam D√ºym…ôsi */
  .reward-ad-btn {
    background: linear-gradient(135deg, #ff6b6b, #ffa500);
    color: white;
    border: none;
    padding: 8px 15px;
    border-radius: 20px;
    font-size: 0.9rem;
    cursor: pointer;
    transition: all 0.3s ease;
    box-shadow: 0 4px 15px rgba(255, 107, 107, 0.3);
  }
  
  .reward-ad-btn:hover {
    transform: translateY(-2px);
    box-shadow: 0 6px 20px rgba(255, 107, 107, 0.4);
  }
  
  /* Premium Status */
  .premium-status {
    text-align: center;
    padding: 10px;
    background: linear-gradient(135deg, #4CAF50, #45a049);
    color: white;
    border-radius: 10px;
    margin: 10px 0;
    font-size: 0.9rem;
    animation: premiumGlow 2s ease-in-out infinite alternate;
  }
  
  @keyframes premiumGlow {
    from { box-shadow: 0 0 10px rgba(76, 175, 80, 0.5); }
    to { box-shadow: 0 0 20px rgba(76, 175, 80, 0.8); }
  }
  
  /* Premium D√ºym…ôl…ôr */
  .premium-btn {
    background: linear-gradient(135deg, #9b59b6, #8e44ad) !important;
    color: white !important;
    position: relative;
    overflow: hidden;
  }
  
  .premium-btn:disabled {
    background: #bdc3c7 !important;
    cursor: not-allowed;
    opacity: 0.6;
  }
  
  .premium-btn:not(:disabled):hover {
    background: linear-gradient(135deg, #8e44ad, #9b59b6) !important;
    transform: translateY(-2px);
  }
  
  .premium-btn::before {
    content: 'üîí';
    position: absolute;
    top: 2px;
    right: 2px;
    font-size: 0.7rem;
    opacity: 0.8;
  }
  
  .premium-btn.unlocked::before {
    content: '‚≠ê';
  }
  `;
  
  installButton.addEventListener('click', async () => {
    if (deferredPrompt) {
      deferredPrompt.prompt();
      const { outcome } = await deferredPrompt.userChoice;
      if (outcome === 'accepted') {
        console.log('PWA qura≈üdƒ±rƒ±ldƒ±');
      }
      deferredPrompt = null;
      installButton.style.display = 'none';
    }
  });
  
  window.addEventListener('beforeinstallprompt', (e) => {
    e.preventDefault();
    deferredPrompt = e;
    installButton.style.display = 'block';
  });
  
  window.addEventListener('appinstalled', () => {
    console.log('PWA qura≈üdƒ±rƒ±ldƒ±');
    installButton.style.display = 'none';
    deferredPrompt = null;
  });
  
  document.body.appendChild(installButton);
</script>

<!-- Premium Features -->
<script src="premium-features.js"></script>

<!-- AdMob Banner Reklam -->
<div id="admob-banner" style="text-align: center; margin: 20px 0; padding: 10px;">
  <ins class="adsbygoogle"
       style="display:block"
       data-ad-client="ca-pub-XXXXXXXXXX"
       data-ad-slot="YYYYYYYYYY"
       data-ad-format="auto"
       data-full-width-responsive="true"></ins>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({});
  </script>
</div>

</body>
</html>
